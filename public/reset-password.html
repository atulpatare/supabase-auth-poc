<html>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    const resetPasswordForUser = async (accessToken, refreshToken) => {
      await client.auth.setSession({
        access_token: accessToken,
        refresh_token: refreshToken,
      });
      const update = await client.auth.updateUser({
        password: "asdfasdf",
      });
      console.log(update);
    };

    const parsedHash = new URLSearchParams(window.location.hash.substring(1));
    const accessToken = parsedHash.get("access_token");
    const refreshToken = parsedHash.get("refresh_token");
    console.log(window.location.hash.substring(1));
    console.log(accessToken);

    const client = new supabase.SupabaseClient(
      "http://127.0.0.1:54321",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU"
    );
    resetPasswordForUser(accessToken, refreshToken);
  </script>
  <body>
    <h2>Hello world</h2>
  </body>
</html>
